<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>História e Geografia do AM - FGV ALEAM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Inter", sans-serif;
      }

      /* Animação do Modal */
      .modal-enter {
        animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }
      @keyframes popIn {
        from {
          opacity: 0;
          transform: scale(0.9);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .hidden {
        display: none !important;
      }
      .no-select {
        user-select: none;
        -webkit-user-select: none;
      }

      /* Scrollbar personalizada Âmbar */
      .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
      }
      .custom-scrollbar::-webkit-scrollbar-track {
        background: #fffbeb;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #d97706;
        border-radius: 10px;
      }
    </style>
  </head>

  <body
    class="bg-slate-100 text-slate-800 min-h-screen flex flex-col overflow-hidden"
  >
    <header class="bg-amber-600 text-white p-4 shadow-lg z-10 shrink-0">
      <div class="container mx-auto max-w-xl flex justify-between items-center">
        <div class="flex items-center gap-3">
          <a
            href="../index.html"
            class="opacity-80 hover:opacity-100 transition"
            ><i class="fa-solid fa-arrow-left"></i
          ></a>
          <h1 class="font-bold text-lg">
            <i class="fa-solid fa-map-location-dot mr-2"></i>História/Geo AM
          </h1>
        </div>
        <div
          class="text-xs font-bold bg-amber-700 px-3 py-1 rounded-full border border-amber-400 shadow-inner"
        >
          <span id="score-display">Pontos: 0</span>
        </div>
      </div>
    </header>

    <main
      class="flex-grow flex flex-col items-center justify-center p-4 w-full relative overflow-y-auto"
    >
      <div
        id="quiz-card"
        class="w-full max-w-md bg-white rounded-2xl shadow-xl overflow-hidden border border-slate-200 flex flex-col max-h-full"
      >
        <div class="w-full bg-slate-100 h-1.5">
          <div
            id="progress-bar"
            class="bg-amber-500 h-1.5 transition-all duration-500 ease-out"
            style="width: 0%"
          ></div>
        </div>

        <div class="p-6 overflow-y-auto custom-scrollbar">
          <div class="flex justify-between items-center mb-4">
            <span
              id="q-category"
              class="bg-amber-50 text-amber-700 text-[10px] uppercase font-bold px-2 py-1 rounded tracking-wider border border-amber-100"
            >
              Categoria
            </span>
            <span id="q-count" class="text-xs font-bold text-slate-400">
              1/20
            </span>
          </div>

          <h2
            id="q-text"
            class="text-lg md:text-xl font-semibold text-slate-800 mb-6 leading-relaxed"
          >
            ...
          </h2>

          <div id="options-container" class="space-y-3 pb-2"></div>
        </div>
      </div>

      <div
        id="result-screen"
        class="hidden w-full max-w-md bg-white rounded-2xl shadow-xl p-8 text-center modal-enter"
      >
        <div
          class="w-20 h-20 bg-amber-100 text-amber-600 rounded-full flex items-center justify-center mx-auto mb-6 text-4xl shadow-inner"
        >
          <i class="fa-solid fa-compass"></i>
        </div>
        <h2 class="text-2xl font-bold text-slate-800 mb-2">
          Exploração Concluída!
        </h2>
        <p class="text-slate-500 mb-6">Conhecimento Regional:</p>

        <div
          class="text-5xl font-black text-amber-600 mb-2 tracking-tighter"
          id="final-score-big"
        >
          0
        </div>
        <div
          class="text-sm font-bold text-slate-400 uppercase tracking-widest mb-8"
        >
          Pontos Totais
        </div>

        <button
          onclick="location.reload()"
          class="w-full bg-slate-800 text-white font-bold py-4 rounded-xl hover:bg-slate-900 transition shadow-lg transform active:scale-95"
        >
          <i class="fa-solid fa-rotate-right mr-2"></i> Refazer Quiz
        </button>
      </div>
    </main>

    <div
      id="feedback-modal"
      class="fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-50 flex items-center justify-center hidden p-6 transition-opacity duration-200"
    >
      <div
        class="bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden modal-enter transform transition-all scale-100"
      >
        <div
          id="modal-header"
          class="p-6 text-center transition-colors duration-300"
        >
          <div
            id="modal-icon"
            class="text-5xl mb-2 drop-shadow-sm scale-110 transform transition-transform duration-500"
          ></div>
          <h3 id="modal-title" class="text-xl font-bold text-white mt-2"></h3>
        </div>

        <div class="p-6 text-center">
          <div
            id="modal-message"
            class="text-slate-600 mb-6 text-sm font-medium leading-relaxed text-left bg-slate-50 p-3 rounded-lg border border-slate-100"
          ></div>

          <div class="flex flex-col gap-3">
            <button
              id="btn-retry"
              class="hidden w-full py-3.5 px-4 rounded-xl font-bold border-2 border-slate-200 text-slate-600 hover:bg-slate-50 hover:border-slate-300 transition focus:outline-none"
            >
              <i class="fa-solid fa-rotate-left mr-2"></i> Tentar Novamente
            </button>
            <button
              id="btn-next"
              class="w-full py-3.5 px-4 rounded-xl font-bold text-white shadow-lg transition transform active:scale-95 focus:outline-none"
            >
              Próxima <i class="fa-solid fa-arrow-right ml-2"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // === BANCO DE QUESTÕES - HISTÓRIA E GEOGRAFIA DO AM (PADRÃO FGV) ===
      const questions = [
        // BLOCO 1: HISTÓRIA ECONÔMICA (BORRACHA E ZFM)
        {
          id: 1,
          category: "Ciclo da Borracha",
          q: "O período áureo da borracha (1890-1910) transformou Manaus na 'Paris dos Trópicos'. Esse ciclo econômico entrou em declínio devido:",
          options: [
            "À invenção da borracha sintética pelos alemães.",
            "À concorrência da produção asiática (Malásia), com sementes contrabandeadas.",
            "Ao esgotamento das seringueiras na Amazônia.",
            "À proibição da exportação pelo governo brasileiro.",
            "À crise de 1929 nos Estados Unidos.",
          ],
          correct: 1,
          explanation:
            "<strong>Biopirataria Histórica:</strong><br>O inglês Henry Wickham contrabandeou sementes para a Inglaterra, que foram plantadas nas colônias asiáticas (Malásia). A produção organizada em plantações (racional) superou a extração nativa da Amazônia.",
        },
        {
          id: 2,
          category: "Zona Franca de Manaus",
          q: "Criada em 1967, durante o Regime Militar, a Zona Franca de Manaus (ZFM) teve como principal objetivo geopolítico:",
          options: [
            "Exportar matéria-prima da floresta para a Europa.",
            "Criar um polo exclusivamente turístico.",
            "Ocupar e integrar a Amazônia Ocidental para garantir a soberania nacional ('Integrar para não Entregar').",
            "Substituir o Ciclo da Borracha pela mineração.",
            "Desenvolver a agricultura de soja na região.",
          ],
          correct: 2,
          explanation:
            "<strong>Geopolítica Militar:</strong><br>A ZFM foi uma estratégia de ocupação territorial para evitar a internacionalização da Amazônia e promover o desenvolvimento econômico de uma região isolada.",
        },
        {
          id: 3,
          category: "Ciclo da Borracha",
          q: "Um fenômeno social marcante do Ciclo da Borracha foi a migração em massa de trabalhadores de qual região brasileira?",
          options: [
            "Sul (Gaúchos).",
            "Sudeste (Mineiros).",
            "Nordeste (Arigós), fugindo da seca.",
            "Centro-Oeste (Pantaneiros).",
            "Norte (Paraenses apenas).",
          ],
          correct: 2,
          explanation:
            "<strong>Os Soldados da Borracha:</strong><br>Milhares de nordestinos (chamados de 'Arigós') migraram para a Amazônia, fugindo da Grande Seca de 1877 e, posteriormente, recrutados durante a 2ª Guerra Mundial.",
        },
        {
          id: 4,
          category: "Zona Franca de Manaus",
          q: "O modelo econômico da ZFM é baseado em incentivos fiscais. Qual é o imposto federal cuja isenção é o principal atrativo para as indústrias?",
          options: [
            "IPTU.",
            "IPVA.",
            "IPI (Imposto sobre Produtos Industrializados).",
            "ISS.",
            "ITBI.",
          ],
          correct: 2,
          explanation:
            "<strong>Incentivos Fiscais:</strong><br>O IPI (federal) e o ICMS (estadual) são os pilares. A isenção/redução do IPI torna os produtos fabricados em Manaus competitivos no restante do país.",
        },
        {
          id: 5,
          category: "Economia Atual",
          q: "Além do Polo Industrial de Manaus (PIM), a economia do Amazonas destaca-se no setor primário pela produção de:",
          options: [
            "Trigo e Uva.",
            "Cana-de-açúcar e Café.",
            "Juta, Malva e Guaraná.",
            "Algodão e Soja em larga escala.",
            "Eucalipto.",
          ],
          correct: 2,
          explanation:
            "<strong>Culturas Regionais:</strong><br>O Amazonas é tradicional produtor de fibras (Juta e Malva) nas várzeas e Guaraná (Maués). A soja avança no sul do estado (Humaitá), mas as fibras são históricas.",
        },

        // BLOCO 2: GEOGRAFIA FÍSICA E HUMANA
        {
          id: 6,
          category: "Hidrografia",
          q: "O 'Encontro das Águas', fenômeno turístico próximo a Manaus, ocorre na confluência de quais rios?",
          options: [
            "Rio Negro e Rio Madeira.",
            "Rio Solimões e Rio Amazonas.",
            "Rio Negro (água preta) e Rio Solimões (água barrenta).",
            "Rio Tapajós e Rio Negro.",
            "Rio Purus e Rio Solimões.",
          ],
          correct: 2,
          explanation:
            "<strong>Fenômeno Físico:</strong><br>O Rio Negro (ácido, lento, frio) encontra o Rio Solimões (barrento, rápido, quente). Eles correm lado a lado sem se misturar por quilômetros até formarem o Rio Amazonas.",
        },
        {
          id: 7,
          category: "Relevo",
          q: "O ponto culminante (mais alto) do Brasil localiza-se no estado do Amazonas. Trata-se do:",
          options: [
            "Pico da Bandeira.",
            "Monte Roraima.",
            "Pico da Neblina.",
            "Pico 31 de Março.",
            "Pico das Agulhas Negras.",
          ],
          correct: 2,
          explanation:
            "<strong>Teto do Brasil:</strong><br>O Pico da Neblina (2.995m) fica na Serra do Imeri, município de Santa Isabel do Rio Negro, fronteira com a Venezuela.",
        },
        {
          id: 8,
          category: "Clima",
          q: "O clima predominante no estado do Amazonas, caracterizado por altas temperaturas e chuvas abundantes o ano todo, é o:",
          options: [
            "Tropical de Altitude.",
            "Equatorial Úmido.",
            "Subtropical.",
            "Semiárido.",
            "Tropical Litorâneo.",
          ],
          correct: 1,
          explanation:
            "<strong>Clima Equatorial:</strong><br>Região cortada pela Linha do Equador. Quente e úmido, com pequena amplitude térmica anual e sem estação seca definida (apenas 'menos chuvosa').",
        },
        {
          id: 9,
          category: "Fuso Horário",
          q: "Em relação ao Horário de Brasília, o estado do Amazonas possui:",
          options: [
            "O mesmo horário em todo o estado.",
            "Um fuso horário de -1 hora em todo o estado.",
            "Dois fusos horários: -1 hora (leste/Manaus) e -2 horas (oeste/Tabatinga).",
            "Um fuso de +1 hora.",
            "Dois fusos: o mesmo de Brasília e -1 hora.",
          ],
          correct: 2,
          explanation:
            "<strong>Fusos do AM:</strong><br>O Amazonas é cortado por dois fusos. A maior parte (incluindo Manaus) está a -1h de Brasília. O extremo oeste (Tabatinga, Atalaia do Norte) está a -2h de Brasília.",
        },
        {
          id: 10,
          category: "Vegetação",
          q: "A vegetação de 'Igapó' na Amazônia caracteriza-se por:",
          options: [
            "Ocorrer em terras altas, livres de inundações.",
            "Ser inundada periodicamente (sazonalmente).",
            "Ser permanentemente inundada pelos rios.",
            "Ser uma vegetação de cerrado (campos).",
            "Ocorrer apenas no litoral.",
          ],
          correct: 2,
          explanation:
            "<strong>Classificação:</strong><br>• Mata de Terra Firme: Nunca inunda.<br>• Mata de Várzea: Inunda periodicamente (cheias).<br>• Mata de Igapó: Permanentemente alagada.",
        },

        // BLOCO 3: HISTÓRIA POLÍTICA E TRATADOS
        {
          id: 11,
          category: "Formação Territorial",
          q: "O Tratado de 1750, que garantiu a posse portuguesa sobre a Amazônia baseado no princípio do 'Uti Possidetis' (a terra é de quem a ocupa), foi o:",
          options: [
            "Tratado de Tordesilhas.",
            "Tratado de Madri.",
            "Tratado de Petrópolis.",
            "Tratado de Santo Ildefonso.",
            "Tratado de Utrecht.",
          ],
          correct: 1,
          explanation:
            "<strong>Tratado de Madri (1750):</strong><br>Anulou Tordesilhas e reconheceu a expansão portuguesa para além da linha imaginária, legitimando a posse da Amazônia.",
        },
        {
          id: 12,
          category: "Revoltas",
          q: "A Cabanagem (1835-1840) foi uma revolta popular que agitou a Amazônia. Um de seus principais motivos foi:",
          options: [
            "A luta contra a escravidão indígena e o domínio da elite política local/regencial.",
            "A tentativa de separar o Amazonas do Grão-Pará.",
            "A defesa da Monarquia Portuguesa.",
            "A disputa por terras com o Peru.",
            "A invasão francesa no Amapá.",
          ],
          correct: 0,
          explanation:
            "<strong>Cabanagem:</strong><br>Revolta de cunho popular (índios, mestiços, pobres vivendo em cabanas) contra a miséria e o abandono político do governo regencial e da elite de Belém.",
        },
        {
          id: 13,
          category: "Política Imperial",
          q: "A Província do Amazonas foi criada em 1850, desmembrando-se do:",
          options: [
            "Maranhão.",
            "Mato Grosso.",
            "Grão-Pará.",
            "Rio Negro.",
            "Goiás.",
          ],
          correct: 2,
          explanation:
            "<strong>Autonomia (1850):</strong><br>Até 1850, a região era a Comarca do Alto Amazonas, subordinada à Província do Grão-Pará (Belém). A elevação à categoria de Província foi vital para o desenvolvimento local.",
        },
        {
          id: 14,
          category: "Símbolos",
          q: "O Teatro Amazonas, inaugurado em 1896, é o símbolo máximo de qual período histórico?",
          options: [
            "Período Colonial.",
            "Belle Époque (Ciclo da Borracha).",
            "Ditadura Militar.",
            "Zona Franca de Manaus.",
            "Cabanagem.",
          ],
          correct: 1,
          explanation:
            "<strong>Belle Époque:</strong><br>A riqueza da borracha financiou o luxo e a arquitetura europeia em Manaus. O Teatro é o ícone desse período de ostentação.",
        },
        {
          id: 15,
          category: "Questões Indígenas",
          q: "O líder indígena Ajuricaba, do povo Manaó, é historicamente conhecido por:",
          options: [
            "Aliar-se aos portugueses na caça aos escravos.",
            "Liderar a resistência contra a escravização portuguesa no século XVIII.",
            "Fundar a cidade de Manaus.",
            "Assinar o Tratado de Madri.",
            "Ser o primeiro governador da província.",
          ],
          correct: 1,
          explanation:
            "<strong>Herói Indígena:</strong><br>Ajuricaba unificou tribos contra os portugueses. Preferiu a morte (lançando-se no rio acorrentado) a ser levado como escravo/prisioneiro para Belém.",
        },

        // BLOCO 4: ATUALIDADES E DIVERSOS
        {
          id: 16,
          category: "Logística",
          q: "A principal via de transporte de cargas e passageiros no estado do Amazonas é o modal:",
          options: [
            "Rodoviário.",
            "Ferroviário.",
            "Hidroviário (Fluvial).",
            "Aéreo.",
            "Dutoviário.",
          ],
          correct: 2,
          explanation:
            "<strong>Rios como Ruas:</strong><br>Devido à densa floresta e imensa rede hidrográfica, os rios são as 'estradas' naturais da região. O transporte fluvial é vital para o interior.",
        },
        {
          id: 17,
          category: "Geografia Urbana",
          q: "A Região Metropolitana de Manaus concentra a maior parte da população do estado. Esse fenômeno é chamado de:",
          options: [
            "Conurbação.",
            "Macrocefalia Urbana.",
            "Rurbanização.",
            "Desmetropolização.",
            "Gentrificação.",
          ],
          correct: 1,
          explanation:
            "<strong>Macrocefalia:</strong><br>Manaus concentra mais de 50% da população e da economia do estado, criando uma desproporção gigante em relação às cidades do interior.",
        },
        {
          id: 18,
          category: "Etnias",
          q: "Os Sateré-Mawé são conhecidos culturalmente pelo ritual de passagem da tucandeira e pelo cultivo ancestral de:",
          options: ["Mandioca.", "Guaraná.", "Açaí.", "Tabaco.", "Milho."],
          correct: 1,
          explanation:
            "<strong>O Guaraná:</strong><br>Os Sateré-Mawé são os 'inventores' da cultura do guaraná e detêm saberes ancestrais sobre seu cultivo e processamento.",
        },
        {
          id: 19,
          category: "Limites",
          q: "O estado do Amazonas faz fronteira internacional com quais países?",
          options: [
            "Venezuela, Colômbia e Peru.",
            "Venezuela, Colômbia e Bolívia.",
            "Peru, Bolívia e Guiana.",
            "Suriname, Guiana e Venezuela.",
            "Colômbia, Equador e Peru.",
          ],
          correct: 0,
          explanation:
            "<strong>Fronteiras:</strong><br>Norte: Venezuela.<br>Noroeste: Colômbia.<br>Sudoeste: Peru.<br>A Bolívia faz fronteira com Acre e Rondônia, não com o Amazonas.",
        },
        {
          id: 20,
          category: "Navegação",
          q: "O Porto de Manaus é do tipo 'Flutuante' (Roadway). Essa tecnologia foi adotada para:",
          options: [
            "Facilitar a defesa militar.",
            "Acompanhar a oscilação do nível do Rio Negro (cheia e vazante).",
            "Reduzir custos de construção.",
            "Evitar ataques de animais aquáticos.",
            "Permitir a passagem de submarinos.",
          ],
          correct: 1,
          explanation:
            "<strong>Porto Flutuante:</strong><br>Construído pelos ingleses, ele sobe e desce conforme o nível do rio, permitindo a atracação de navios o ano todo, independente da variação de mais de 10 metros das águas.",
        },
      ];

      // === VARIÁVEIS DE CONTROLE ===
      let currentIndex = 0;
      let score = 0;
      let attempts = 0;

      // === UI ELEMENTS ===
      const ui = {
        card: document.getElementById("quiz-card"),
        resultScreen: document.getElementById("result-screen"),
        qCategory: document.getElementById("q-category"),
        qCount: document.getElementById("q-count"),
        qText: document.getElementById("q-text"),
        optsContainer: document.getElementById("options-container"),
        progressBar: document.getElementById("progress-bar"),
        scoreDisplay: document.getElementById("score-display"),
        finalScore: document.getElementById("final-score-big"),
        modal: document.getElementById("feedback-modal"),
        modalHeader: document.getElementById("modal-header"),
        modalIcon: document.getElementById("modal-icon"),
        modalTitle: document.getElementById("modal-title"),
        modalMsg: document.getElementById("modal-message"),
        btnRetry: document.getElementById("btn-retry"),
        btnNext: document.getElementById("btn-next"),
      };

      function init() {
        currentIndex = 0;
        score = 0;
        loadQuestion();
      }

      function loadQuestion() {
        const q = questions[currentIndex];
        attempts = 0;
        ui.qCategory.innerText = q.category;
        ui.qCount.innerText = `${currentIndex + 1}/${questions.length}`;
        ui.qText.innerHTML = q.q; // Permite HTML para negrito
        ui.scoreDisplay.innerText = `Pontos: ${score}`;

        const pct = (currentIndex / questions.length) * 100;
        ui.progressBar.style.width = `${pct}%`;

        ui.optsContainer.innerHTML = "";
        q.options.forEach((opt, idx) => {
          const btn = document.createElement("button");
          btn.className = `w-full text-left p-4 rounded-xl border-2 border-slate-100 bg-slate-50 hover:bg-white hover:border-amber-300 hover:shadow-md transition-all duration-200 flex items-center group no-select`;
          btn.innerHTML = `
            <span class="w-8 h-8 rounded-full bg-white text-slate-500 font-bold flex items-center justify-center text-xs mr-4 border border-slate-200 group-hover:bg-amber-600 group-hover:text-white group-hover:border-amber-600 transition-colors">
              ${String.fromCharCode(65 + idx)}
            </span>
            <span class="text-sm font-medium text-slate-700 group-hover:text-slate-900">${opt}</span>
          `;
          btn.onclick = () => handleAnswer(idx);
          ui.optsContainer.appendChild(btn);
        });
      }

      function handleAnswer(selectedIndex) {
        const q = questions[currentIndex];
        const isCorrect = selectedIndex === q.correct;

        ui.modal.classList.remove("hidden");

        if (isCorrect) {
          if (attempts === 0) score += 5; // Peso menor para matérias de 5 questões
          configureModal("success");
          ui.modalTitle.innerText = "Resposta Certa!";
          ui.modalMsg.innerHTML = `<span class="text-amber-600 font-bold">Contexto:</span><br><br>${q.explanation}`;
          ui.btnRetry.classList.add("hidden");
        } else {
          attempts++;
          configureModal("error");
          ui.modalTitle.innerText = "Resposta Incorreta";
          ui.modalMsg.innerHTML = `<span class="text-rose-600 font-bold">Fique Atento:</span><br><br>${q.explanation}`;
          ui.btnRetry.classList.remove("hidden");
        }
      }

      function configureModal(type) {
        if (type === "success") {
          ui.modalHeader.className = "p-6 text-center bg-emerald-500";
          ui.modalIcon.innerHTML =
            '<i class="fa-solid fa-check text-white"></i>';
          ui.btnNext.className =
            "w-full py-3.5 px-4 rounded-xl font-bold bg-emerald-600 text-white hover:bg-emerald-700 shadow-lg transition";
        } else {
          ui.modalHeader.className = "p-6 text-center bg-rose-500";
          ui.modalIcon.innerHTML =
            '<i class="fa-solid fa-xmark text-white"></i>';
          ui.btnNext.className =
            "w-full py-3.5 px-4 rounded-xl font-bold bg-slate-800 text-white hover:bg-slate-900 shadow-lg transition";
        }
        ui.btnNext.focus();
      }

      ui.btnRetry.onclick = () => ui.modal.classList.add("hidden");

      ui.btnNext.onclick = () => {
        ui.modal.classList.add("hidden");
        currentIndex++;
        if (currentIndex < questions.length) loadQuestion();
        else showResults();
      };

      function showResults() {
        ui.card.classList.add("hidden");
        ui.resultScreen.classList.remove("hidden");
        ui.finalScore.innerText = score;
        ui.scoreDisplay.innerText = `Final: ${score}`;
      }

      init();
    </script>
  </body>
</html>
